{% extends 'SmartkillWebBundle::layout.html.twig' %}

{% block title %}SmartKill - Mecze{% endblock %}

{% block javascripts %}
    {{ parent() }}
	<script type="text/javascript" src="http://maps.google.com/maps/api/js?language=en&sensor=false"></script>
{% endblock %}

{% block content %}

	<div class="block">
		<ul class="nav nav-pills pull-right">
			<li><a href="{{ path('match_edit', { 'id': entity.id }) }}"><i class="icon-pencil"></i> Edytuj</a></li>
			<li><a href="{{ path('match_delete', { 'id': entity.id }) }}"><i class="icon-remove"></i> Usuń</a></li>
		</ul>
		
		<h2>Mecz: {{ entity.name }} </h2>
		
		<div class="row-fluid">
			<div class="span5">
				<div id="map_canvas" class="map-canvas" style="height: 250px;"></div>
				<script>
					$(function(){
						var center = new google.maps.LatLng({{ entity.lat }}, {{ entity.lng }}, true);
						
						var map = new google.maps.Map(document.getElementById('map_canvas'), {
							mapTypeId: google.maps.MapTypeId.ROADMAP,
							zoom: 10
						});
						
						map.setCenter(center);
						
						var circle = new google.maps.Circle({
							map: map,
							center: center,
							radius: {{ entity.size }} * 1000,
							strokeWeight: 2
						});
					});
				</script>
				
				{% if joined == false %}
			    	<form action="{{ path('match_join', { 'id': entity.id }) }}" method="post">
			            <input type="password" name="pass" />
			            <button type="submit">Dołącz</button>
			        </form>
				{% endif %}
				<a class="btn btn-primary btn-large btn-block">Dołącz</a>
			</div>
			<div class="span7">
				<table class="table">
					<colgroup span="1" width="150px" />
					<tr>
						<td><strong>Organizator:</strong></td>
						<td></td>
					</tr>
					<tr>
						<td><strong>Data rozpoczęcia:</strong></td>
						<td>{{ entity.dueDate|date('Y-m-d H:i') }}</td>
					</tr>
					<tr>
						<td><strong>Czas trwania:</strong></td>
						<td>{{ entity.getLengthDesc }}</td>
					</tr>
					<tr>
						<td><strong>Graczy:</strong></td>
						<td>0 / {{ entity.maxPlayers }}</td>
					</tr>
					<tr>
						<td><strong>Lokalizacja:</strong></td>
						<td>Lat: {{ entity.lat }}, Lng: {{ entity.lng }}, R={{ entity.size }}</td>
					</tr>
				</table>
				
				<legend>Łowcy</legend>
				<div class="well">
					<div class="user">
						<a href="#">
							<img src="" alt="" />
							NazwaUsera
						</a>
					</div>
				</div>
				
				<legend>Ofiary</legend>
				<div class="well">
					
				</div>
			</div>
		</div>
		
	</div>

{% endblock %}
